import{_ as i,c as a,o as t,ak as e}from"./chunks/framework.CmzJUe0_.js";const l="/assets/blog_20240805170429.BkII3J6L.png",p="/assets/blog_20240805170714.C5fyCFmy.png",c=JSON.parse('{"title":"图片防盗链","description":"","frontmatter":{"title":"图片防盗链","date":"2024-08-15T00:00:00.000Z","sidebar":"auto","categories":["随笔"]},"headers":[],"relativePath":"blogs/随笔/图片防盗链.md","filePath":"blogs/随笔/图片防盗链.md"}'),r={name:"blogs/随笔/图片防盗链.md"};function n(h,s,k,o,d,g){return t(),a("div",null,s[0]||(s[0]=[e('<p>[toc]</p><h1 id="图片防盗链" tabindex="-1">图片防盗链 <a class="header-anchor" href="#图片防盗链" aria-label="Permalink to &quot;图片防盗链&quot;">​</a></h1><blockquote><p>问题</p></blockquote><p>当我们在自己的网站上使用其他第三方网站的图片的时候，可能会无法加载这些图片。但是我们单独访问这些图片的时候，是可以显示的。</p><p>原因是这些远程图片所在的网站设置防盗链机制。</p><blockquote><p>什么是防盗链机制？</p></blockquote><ol><li>当自己的网站去请求第三方网站中的图片的时候，请求头属性中有一个Referrer属性，该Referrer属性值就是自己网站的域名。</li><li>当第三方网站的后台会判断请求的Referrer属性是不是本网站的。如果是那么请求通过。如果不是，那么请求拒绝，返回403 forbidden。因此请求图片失败，导致图片无法显示。</li></ol><p>在百度贴吧网站中查看百度贴吧的图片 <img src="'+l+'" alt="blog_20240805170429.png"></p><p>在其他网站中查看百度贴吧的图片 <img src="'+p+`" alt="blog_20240805170714.png"></p><p><span style="color:red;">另外之所以本地请求这些远程图片可以正常显示。是因为本地请求的时候，请求头的Referrer属性为空值（或者没有Referrer属性）。此时网站无法判断Referrer属性。</span></p><blockquote><p>解决方法</p></blockquote><p>方法1：在HTML代码的head中添加一句。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;referrer&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-referrer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><p>方法2：设置img/image标签的referrer属性</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> referrer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-referrer|origin|unsafe-url&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">image</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> referrer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-referrer|origin|unsafe-url&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div>`,15)]))}const u=i(r,[["render",n]]);export{c as __pageData,u as default};
