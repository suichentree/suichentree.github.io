import{_ as a,c as n,o as p,ak as e}from"./chunks/framework.CmzJUe0_.js";const i="/assets/20220630102322.89Y5BXYh.png",g=JSON.parse('{"title":"通过添加静态路由实现windows系统下内外网同时访问","description":"","frontmatter":{"title":"通过添加静态路由实现windows系统下内外网同时访问","date":"2022-06-28T00:00:00.000Z","sidebar":"auto","categories":["随笔"]},"headers":[],"relativePath":"blogs/随笔/内外网同时访问.md","filePath":"blogs/随笔/内外网同时访问.md"}'),l={name:"blogs/随笔/内外网同时访问.md"};function t(o,s,c,d,r,u){return p(),n("div",null,s[0]||(s[0]=[e(`<h2 id="通过添加静态路由实现windows系统下内外网同时访问" tabindex="-1">通过添加静态路由实现windows系统下内外网同时访问 <a class="header-anchor" href="#通过添加静态路由实现windows系统下内外网同时访问" aria-label="Permalink to &quot;通过添加静态路由实现windows系统下内外网同时访问&quot;">​</a></h2><blockquote><p>问题描述</p></blockquote><p>当在公司使用网线连接内网的时候，就无法使用外网。如何同时访问内外网？</p><blockquote><p>解决方法</p></blockquote><p>在windows系统中添加静态路由，来实现内外网同时连接的效果。</p><p>内网：一般通过网线来连接，基本上是固定ip，固定网关。 外网：一般通过wifi连接。访问的ip不固定。但是网关是固定的。</p><blockquote><p>如何查询内外网的网关和ip等信息?</p></blockquote><p>打开cmd,输入命令ipconfig。即可查询当前连接网络的信息。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>C:\\Windows\\system32&gt;ipconfig</span></span>
<span class="line"><span>Windows IP 配置</span></span>
<span class="line"><span>以太网适配器 以太网:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   IPv4 地址 . . . . . . . . . . . . : 192.168.20.108</span></span>
<span class="line"><span>   子网掩码  . . . . . . . . . . . . : 255.255.255.0</span></span>
<span class="line"><span>   默认网关. . . . . . . . . . . . . : 192.168.20.1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>无线局域网适配器 WLAN:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   IPv4 地址 . . . . . . . . . . . . : 192.168.11.109</span></span>
<span class="line"><span>   子网掩码  . . . . . . . . . . . . : 255.255.255.0</span></span>
<span class="line"><span>   默认网关. . . . . . . . . . . . . : 192.168.11.1</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>内网IPv4地址为192.168.20.108,指的是在内网中，这台机器的网络地址是192.168.20.108</span></span>
<span class="line"><span>WLAN网IPv4地址为192.168.11.109,指的是在WLAN网中，这台机器的网络地址是192.168.11.109</span></span>
<span class="line"><span>WLAN网本质上也是一个大内网。只不过这个内网与互联网是连通的。</span></span></code></pre></div><blockquote><p>解决步骤</p></blockquote><ol><li>以管理员身份打开cmd</li><li>确定内外网的网关和ip信息是那些，可通过ipconfig查询。</li><li>通过route print命令查询静态路由。</li></ol><p><img src="`+i+`" alt="20220630102322.png"></p><ol start="4"><li>删除现有的 0.0.0.0 路由。</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>route delete 0.0.0.0</span></span></code></pre></div><p>0.0.0.0 路由是默认路由。指的是当路由表中与实际访问地址之间无法匹配时，路由器所选择的路由。</p><ol start="5"><li>添加内外网静态路由。</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>route add 命令语法: route add -p route 网段地址 mask 子网掩码 网关地址</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>外网添加路由（访问外网的数据从192.168.11.1的网关出去），子网掩码0.0.0.0</span></span>
<span class="line"><span>route add -p 0.0.0.0 mask 0.0.0.0 192.168.11.1</span></span>
<span class="line"><span>该命令的意思是：无法被路由表匹配的IP数据包，全部由网关192.168.11.1路径转发。-p是永久保存的意思。</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>内网添加路由（访问内网10.87.0.0网段的数据从192.168.20.1的网关出去），子网掩码255.255.0.0</span></span>
<span class="line"><span>route add -p 10.87.0.0 mask 255.255.0.0 192.168.20.1</span></span>
<span class="line"><span>该命令的意思是：所有发往10.87.0.0地址的IP数据包，全部由网关192.168.20.1路径转发。-p是永久保存的意思。</span></span></code></pre></div><p><span style="color:red;">注意1：添加内网静态路由必须在能够访问内网的情况下使用才能生效。否则不会生效。</span></p><p><span style="color:red;">注意2：当你添加了内网网段的路由到系统中的静态路由表中后，发现内外网还是无法同时连接。这时你可以将静态路由表中的0.0.0.0默认路由删除试试看。可能原因是路由表中的网段冲突了。</span></p><ol start="6"><li>添加路由后，可以通过ping命令，来试试内外网能否访问。</li></ol>`,23)]))}const b=a(l,[["render",t]]);export{g as __pageData,b as default};
