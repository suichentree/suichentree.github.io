import{_ as i,c as a,o as h,ak as l}from"./chunks/framework.CmzJUe0_.js";const n="/assets/squid_20250908105143879.VMMKWRts.png",k="/assets/squid_20241204101713.C9iTSpbJ.png",p="/assets/squid_20241204102516.CDbJ0T9B.png",c=JSON.parse('{"title":"Squid笔记","description":"","frontmatter":{"title":"Squid笔记","date":"2024-12-04T00:00:00.000Z","lastUpdated":"2025-09-08T00:00:00.000Z","categories":["Squid"],"tags":["Squid"]},"headers":[],"relativePath":"blogs/Squid/Squid笔记.md","filePath":"blogs/Squid/Squid笔记.md"}'),t={name:"blogs/Squid/Squid笔记.md"};function e(F,s,r,d,g,C){return h(),a("div",null,s[0]||(s[0]=[l('<p>[toc]</p><h1 id="squid笔记" tabindex="-1">Squid笔记 <a class="header-anchor" href="#squid笔记" aria-label="Permalink to &quot;Squid笔记&quot;">​</a></h1><p><img src="'+n+`" alt="squid_20250908105143879.png"></p><h2 id="squid介绍" tabindex="-1">Squid介绍 <a class="header-anchor" href="#squid介绍" aria-label="Permalink to &quot;Squid介绍&quot;">​</a></h2><p>Squid是一款非常流行的开源代理和缓存服务器。它主要用于各种网络协议的内容缓存，以提高访问速度，减少带宽使用，并提供更有效的网络服务。</p><p><a href="https://www.squid-cache.org/" target="_blank" rel="noreferrer">Squid官网 https://www.squid-cache.org/</a></p><blockquote><p>Squid的特点</p></blockquote><ol><li>缓存和加速：Squid可以缓存请求的网页、图片和其他文件，这样当同一个资源再次被请求时，它可以快速从本地缓存提供，而不是每次都从原始服务器下载。</li><li>控制访问：Squid可以用来控制哪些内容可以被用户访问。它支持强大的访问控制列表（ACLs），允许管理员根据源地址、目的地、使用的协议等标准过滤内容。</li><li>提供安全性：Squid可以作为一个透明代理来提高网络安全，可以用来拦截恶意流量和提供 SSL/TLS加密的代理服务。</li><li>减少带宽使用：通过缓存频繁访问的内容，Squid可以显著减少带宽需求，特别是在网络连接有限或昂贵的环境中非常有用。</li><li>提高响应时间：由于从近距离缓存提供内容，Squid能够减少数据的往返时间，从而提高响应速度。</li><li>支持多种协议：Squid支持 HTTP、HTTPS、FTP等多种网络协议。</li></ol><blockquote><p>Squid的使用场景</p></blockquote><ol><li>企业网关：在企业环境中，Squid通常用作网关代理，来管理和监控员工的互联网使用。</li><li>ISP缓存解决方案：互联网服务提供商（ISP）使用 Squid来减少带宽使用，加快用户访问互联网资源的速度。</li><li>内容分发网络：Squid可以用作内容分发网络（CDN）的一部分，来提供地理分布式的缓存服务。</li><li>反向代理和负载均衡：Squid还可以配置为反向代理，用于负载均衡和为后端服务器提供缓存服务。</li><li>安全和匿名浏览：Squid还可用于提高浏览的安全性和匿名性，尤其是当结合 VPN或 Tor使用时。</li></ol><h2 id="squid代理服务" tabindex="-1">Squid代理服务 <a class="header-anchor" href="#squid代理服务" aria-label="Permalink to &quot;Squid代理服务&quot;">​</a></h2><p>通过在目标服务器上部署Squid代理服务，将目标服务器变成代理服务器。</p><p>用途1：将能够翻墙的服务器，变成代理服务器。然后通过本地服务器的代理设置去访问代理服务器。从而实现让本地服务器翻墙的效果。</p><p>用途2：若本地服务器的IP，已经被某个网站禁止了。导致本地服务器无法访问该目标网站。那么将一个第三方服务器变成代理服务器。通过本地服务器的代理设置去访问代理服务器，然后再去访问网站。从而实现解决网站封禁IP的方式。</p><h2 id="docker部署squid" tabindex="-1">Docker部署Squid <a class="header-anchor" href="#docker部署squid" aria-label="Permalink to &quot;Docker部署Squid&quot;">​</a></h2><ol><li>下载Squid的docker镜像</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> squid</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu/squid</span></span></code></pre></div><ol start="2"><li>创建Squid配置文件 squid.conf</li></ol><p>主要修改一处地方 <code>acl allowed_ips src 112.17.xx.xx</code>，其他不变。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.1-0.255.255.255</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # RFC 1122 &quot;this&quot; network (LAN)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10.0.0.0/8</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # RFC 1918 local private network (LAN)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100.64.0.0/10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # RFC 6598 shared address space (CGN)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 169.254.0.0/16</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # RFC 3927 link-local (directly plugged) machines</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 172.16.0.0/12</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # RFC 1918 local private network (LAN)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.0.0/16</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # RFC 1918 local private network (LAN)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fc00::/7</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # RFC 4193 local private network range</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fe80::/10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # RFC 4291 link-local (directly plugged) machines</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SSL_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 443</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # http</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # ftp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 443</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # https</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 70</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # gopher</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 210</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # wais</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1025-65535</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # unregistered ports</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 280</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # http-mgmt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 488</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # gss-http</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 591</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # filemaker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Safe_ports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # multiling http</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONNECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> method</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONNECT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 这里配置哪些ip可以使用本代理服务器，多个用空格隔开或写到文件里</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 例如可以写为 acl allowed_ips src 116.23.0.0/16 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allowed_ips</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 112.17.xx.xx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !Safe_ports</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONNECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !SSL_ports</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manager</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manager</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localnet</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 这里运行自己配置的ip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allowed_ips</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 其他一律拒绝</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 绑定ip和端口号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http_port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.0:3128</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">coredump_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/spool/squid</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^ftp:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           1440</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    20%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     10080</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^gopher:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        1440</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      1440</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/cgi-bin/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) 0     0%      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Packages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.bz2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.gz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.xz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)$ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> refresh-ims</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.gpg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)$ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> refresh-ims</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">InRelease</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> refresh-ims</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Translation-.*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.bz2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.gz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\.xz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)$ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> refresh-ims</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh_pattern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">               0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       20%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     4320</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logfile_rotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div><ol start="3"><li>运行容器</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3128 是Squid容器的默认端口</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /usr/local/squid:/etc/squid/ 宿主机的/usr/local/squid目录映射Squidr容器的/etc/squid/目录。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mySquid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 33128:3128</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/squid:/etc/squid/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu/squid:latest</span></span></code></pre></div><p>注意：squid的配置文件squid.conf需要存放到宿主机的/usr/local/squid目录中，这样Squid容器才能读取配置文件中的信息。</p><h2 id="测试代理效果" tabindex="-1">测试代理效果 <a class="header-anchor" href="#测试代理效果" aria-label="Permalink to &quot;测试代理效果&quot;">​</a></h2><ol><li>本地服务器设置代理前。访问查询IP网站。</li></ol><p><img src="`+k+'" alt="squid_20241204101713.png"></p><ol start="2"><li>本地服务器添加代理后。再次访问查询IP网站。可以发现IP变化。</li></ol><p><img src="'+p+'" alt="squid_20241204102516.png"></p><h2 id="squid和vpn的区别" tabindex="-1">Squid和VPN的区别 <a class="header-anchor" href="#squid和vpn的区别" aria-label="Permalink to &quot;Squid和VPN的区别&quot;">​</a></h2><p>Squid是一个功能强大且灵活的工具，它的应用范围从简单的缓存代理到复杂的网络流量管理和安全增强。它的高度可配置性使它适用于各种网络环境，从小型办公室到大型企业和 ISP网络。</p><p>但是Squid和VPN还是有区别的：</p><ul><li>Squid主要用于缓存和控制 HTTP/HTTPS流量，而 VPN用于保护整个网络连接的安全和隐私。</li><li>Squid在隐私保护方面不如 VPN，因为它不会对所有流量进行加密，也不会隐藏用户的真实 IP地址。</li><li>Squid的配置可能比 VPN复杂，尤其是在进行高级过滤和控制时。</li></ul>',32)]))}const o=i(t,[["render",e]]);export{c as __pageData,o as default};
