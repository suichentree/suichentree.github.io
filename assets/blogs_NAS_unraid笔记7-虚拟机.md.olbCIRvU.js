import{_ as a,a as n,b as s,c as l,d as t,e as r,f as o,g as p,h as e,i as d}from"./chunks/unraid_202306102051.Cat5rDad.js";import{_ as u,c as _,o as c,ak as g}from"./chunks/framework.CmzJUe0_.js";const m="/assets/unraid_20230614001912.CQHw7ytT.png",h="/assets/unraid_20230622232715.Cu9n6gg4.png",b="/assets/unraid_20230622210425.Bweaqq1E.png",w="/assets/unraid_20230622233547.BJbXy7ce.png",q="/assets/unraid_20230622233632.DJxp5Mm9.png",k="/assets/unraid_20230622233721.BI-2gW8y.png",v="/assets/unraid_20230622234056.8TY8Pqce.png",f="/assets/unraid_20230622234346.JphhN5g4.png",x="/assets/unraid_20230622234301.B3CTLH2R.png",P="/assets/unraid_20230622234557.Cr4HgR40.png",C="/assets/unraid_20230623193855.Bu3HeKA0.png",N="/assets/unraid_20230623194750.KjTTktk1.png",y="/assets/unraid_20230614003550.D6GlZaI1.png",A="/assets/unraid_20230614005521.2IIMPyDq.png",T="/assets/unraid_20230614005657.3tqX2aoy.png",D="/assets/unraid_20230620210946.DRaUMXKn.png",I="/assets/unraid_20230620202713.C1pm8Lmj.png",J=JSON.parse('{"title":"unraid笔记7-虚拟机","description":"","frontmatter":{"title":"unraid笔记7-虚拟机","date":"2023-06-14T00:00:00.000Z","sidebar":"auto","categories":["NAS"],"tags":["unraid"]},"headers":[],"relativePath":"blogs/NAS/unraid笔记7-虚拟机.md","filePath":"blogs/NAS/unraid笔记7-虚拟机.md"}'),S={name:"blogs/NAS/unraid笔记7-虚拟机.md"};function B(R,i,U,V,L,M){return c(),_("div",null,i[0]||(i[0]=[g('<p>[toc]</p><h1 id="unraid笔记7-虚拟机" tabindex="-1">unraid笔记7-虚拟机 <a class="header-anchor" href="#unraid笔记7-虚拟机" aria-label="Permalink to &quot;unraid笔记7-虚拟机&quot;">​</a></h1><p>unraid提供丰富的虚拟机模板可供创建。</p><p><img src="'+m+'" alt="unraid_20230614001912.png"></p><h2 id="win10虚拟机" tabindex="-1">win10虚拟机 <a class="header-anchor" href="#win10虚拟机" aria-label="Permalink to &quot;win10虚拟机&quot;">​</a></h2><h3 id="准备" tabindex="-1">准备 <a class="header-anchor" href="#准备" aria-label="Permalink to &quot;准备&quot;">​</a></h3><p><a href="https://msdn.itellyou.cn/" target="_blank" rel="noreferrer">msdn我告诉你</a></p><ol><li>先在msdn我告诉你网站上下载win10镜像。所选win10镜像：cn_windows_10_enterprise_ltsc_2019_x64_dvd.iso</li><li>把镜像上传到isos目录中。</li><li>在unraid虚拟机管理器中下载win10虚拟总线驱动程序。会自动下载到isos目录中。 <img src="'+h+'" alt="unraid_20230622232715.png"></li></ol><h3 id="开始安装" tabindex="-1">开始安装 <a class="header-anchor" href="#开始安装" aria-label="Permalink to &quot;开始安装&quot;">​</a></h3><ol><li>进入到unraid 的虚拟机界面，点击创建虚拟机。</li><li>选择win10虚拟机模板</li><li>虚拟机配置如图，内存4g以上，图片中的两个iso路径分别对应win10镜像和win10虚拟总线驱动。 <img src="'+b+'" alt="unraid_20230622210425.png"></li><li>创建虚拟机后进入 VNC 查看显示画面。 <img src="'+w+'" alt="unraid_20230622233547.png"></li><li>一路点击下一步。选择自定义安装。选择系统安装的位置。 <img src="'+q+'" alt="unraid_20230622233632.png"><img src="'+k+'" alt="unraid_20230622233721.png"></li><li>等待安装完成。然后开始进行账户密码等设置。</li><li>登录win10 <img src="'+v+'" alt="unraid_20230622234056.png"></li><li>此时的win10系统有些驱动都没有，无法连接网络等。需要安装驱动。 <img src="'+f+'" alt="unraid_20230622234346.png"></li><li>在此处双击之前导入的win10虚拟总线驱动程序。运行该驱动程序，安装驱动。 <img src="'+x+'" alt="unraid_20230622234301.png"><img src="'+P+'" alt="unraid_20230622234557.png"></li><li>重启虚拟机，开始使用win10把。</li></ol><h3 id="虚拟机win10访问unraid共享文件夹-及其他网络共享" tabindex="-1">虚拟机win10访问UNRAID共享文件夹，及其他网络共享 <a class="header-anchor" href="#虚拟机win10访问unraid共享文件夹-及其他网络共享" aria-label="Permalink to &quot;虚拟机win10访问UNRAID共享文件夹，及其他网络共享&quot;">​</a></h3><p>虚拟机win10需要设置一下，才能访问访问UNRAID共享文件夹。</p><ol><li><p>按window+R键打开运行 - &gt; 在运行中输入“gpedit.msc”来启动本地组策略编辑器。</p></li><li><p>计算机配置-&gt;管理模板-&gt;网络-&gt;Lanman工作站-&gt;启用不安全的来宾登录-&gt;已启用。 <img src="'+C+'" alt="unraid_20230623193855.png"></p></li><li><p>然后再访问UNRAID共享文件夹即可。 <img src="'+N+'" alt="unraid_20230623194750.png"></p></li></ol><h2 id="win10虚拟机-荒野无灯版" tabindex="-1">win10虚拟机-荒野无灯版 <a class="header-anchor" href="#win10虚拟机-荒野无灯版" aria-label="Permalink to &quot;win10虚拟机-荒野无灯版&quot;">​</a></h2><p>为什么创建win10虚拟机？</p><ol><li>用于没有windows环境时执行一些轻量级的应用，比如在NAS和Linux服务器上运行QQ等</li><li>用于运行需要长时间（比如7x24小时）运行的windows应用，比如运行购票软件, bt客户端等。</li></ol><p>使用的镜像文件是荒野无灯大佬的精简版windows10系统镜像，文件名为win10.qcow2</p><p>win10.qcow2镜像：</p><ul><li>文件大小： 8.4 GiB</li><li>运行时内存占用： ~ 600 MB</li><li>运行时系统磁盘占用：7.9 GiB</li><li>系统是英文的（不可添加中文语言）</li><li>中文字体已内置</li><li>非unicode程序的编码已调整为cp936 (中国)</li><li>VC Redist 运行时库已安装</li><li>.NET 4.0 运行时已安装</li><li>由于该镜像过度精简，qemu guest agent无法安装</li><li>输入法暂时默认是英文的，得手动点击切换</li></ul><h3 id="开始安装-1" tabindex="-1">开始安装 <a class="header-anchor" href="#开始安装-1" aria-label="Permalink to &quot;开始安装&quot;">​</a></h3><ol><li>先把win10.qcow2上传到isos共享文件夹中。</li><li>进入到unraid 的虚拟机界面，创建虚拟机。</li><li>选择win10虚拟机模板</li><li>虚拟机配置如图，内存4g左右，主要磁盘选择镜像文件所在路径。注意磁盘总线选择virtio 类型。 <img src="'+y+'" alt="unraid_20230614003550.png"></li><li>其他配置默认即可。注意网卡的类型选择为virtio-net或者virbr0，建议virbr0。 <img src="'+A+'" alt="unraid_20230614005521.png"></li><li>点击安装。安装好后，点击图标进行vnc remote远程桌面。</li><li>这个win10镜像内置了一些工具。 <img src="'+T+'" alt="unraid_20230614005657.png"></li></ol><h2 id="安装群晖虚拟机" tabindex="-1">安装群晖虚拟机： <a class="header-anchor" href="#安装群晖虚拟机" aria-label="Permalink to &quot;安装群晖虚拟机：&quot;">​</a></h2><ol><li><p>虚拟机界面-》添加虚拟机-》选择linux虚拟机</p></li><li><p>进行虚拟机配置。 <img src="'+a+'" alt="unraid_20230610200824.png"></p></li><li><p>主要硬盘（第一块硬盘）配置：路径选择引导文件arpl.img的位置。总线选择为usb,启动顺序改为1. <img src="'+n+'" alt="unraid_20230610201630.png"></p></li><li><p>第二块硬盘配置：第二块硬盘手动选择一个文件夹作为虚拟硬盘。并给虚拟硬盘30g空间。硬盘类型要选择raw,不能选择qcow2。 <img src="'+s+'" alt="unraid_20230611020342.png"></p></li></ol><p>磁盘类型qcow2的意思是动态空间，磁盘的空间会随着数据的增长而增长。 磁盘类型raw的意思是固定空间，硬盘空间大小是固定的。</p><span style="color:red;"> 注意：群晖在安装的时候必须要有一个固定大小的硬盘用来初始化系统。所以第二块硬盘的空间必须要大。太小了会导致系统安装失败（提示格式化硬盘失败）。所以第二块硬盘最好就是一个大空间的虚拟硬盘即可。 </span><ol start="5"><li><p>上面设置完了后，下面的其他设置默认即可。然后点击创建按钮。</p></li><li><p>当虚拟机创建好后，重新编辑虚拟机设置，再右上角选择表单视图，然后更改网卡。 <img src="'+l+'" alt="unraid_20230102028.png"></p></li><li><p>更改完后，重启虚拟机。点击虚拟机图标 选择VNC远程操控。 <img src="'+t+'" alt="unraid_202306102035.png"></p></li><li><p>浏览器访问ip地址，就可以进入到引导配置界面 <img src="'+r+'" alt="unraid_20230610204000.png"></p><ol><li>点击choose a model，选择ds920+版本</li><li>点击 choose a build number ,选择42962固件</li><li>点击 choose a serial number,选择随机生成序列号</li></ol></li><li><p>此时会多处一些选择。 <img src="'+o+'" alt="unraid_20230610204207.png"></p><ol><li>点击 build the loader。开始编译引导程序。</li><li>成功编译完引导程序。会出现boot the loader选择，点击它。</li><li>最后会显示这个界面，表示群晖引导成功。 <img src="'+p+'" alt="unraid_20230610203313.png"></li></ol></li><li><p>输入界面上的ip地址，进入群晖安装界面。 <img src="'+e+'" alt="unraid_202306102049.png"></p></li><li><p>手动上传DSM_DS920+_42962.pat文件。该文件可以在群晖官网上下载。上传后点击下一步。</p></li><li><p>之后格式化硬盘，自动安装，等待即可。 <img src="'+d+'" alt="unraid_202306102051.png"></p></li></ol><h2 id="ubuntu虚拟机" tabindex="-1">ubuntu虚拟机 <a class="header-anchor" href="#ubuntu虚拟机" aria-label="Permalink to &quot;ubuntu虚拟机&quot;">​</a></h2><ol><li>先把ubuntu的iso镜像文件上传到isos共享文件夹中。</li><li>进入到虚拟机界面，创建虚拟机。</li><li>选择ubuntu虚拟机模板</li><li>虚拟机配置如图所示。其余配置默认即可。注意：硬盘类型要选择raw，硬盘容量30g左右。 <img src="'+D+'" alt="unraid_20230620210946.png"></li><li>虚拟机启动后，选择VNC远程操控。可以看到系统安装界面。一路点击下一步即可。 <img src="'+I+`" alt="unraid_20230620202713.png"></li></ol><h3 id="ubuntu挂载unraid共享文件夹" tabindex="-1">ubuntu挂载unraid共享文件夹 <a class="header-anchor" href="#ubuntu挂载unraid共享文件夹" aria-label="Permalink to &quot;ubuntu挂载unraid共享文件夹&quot;">​</a></h3><p>共享文件夹是smb文件协议的。</p><ol><li>ubuntu安装smb客户端工具</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>apt install smbclient</span></span></code></pre></div><ol start="2"><li>查看要访问的ip地址下的共享目录。</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>语法：smbclient -L [IP地址] -U [用户名]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>smbclient -L 192.168.1.167 -U rootadmin</span></span></code></pre></div><ol start="3"><li>使用mount挂载共享文件夹，就能像访问本地文件一样访问</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>语法：mount -o username=[账号],password=[密码] //[服务器IP]/[共享目录] /[挂载点]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mount -o username=rootadmin,password=****** //192.168.1.167/download /home/unraidshare/download</span></span></code></pre></div>`,36)]))}const $=u(S,[["render",B]]);export{J as __pageData,$ as default};
