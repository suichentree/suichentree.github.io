import{_ as e,c as a,o,ak as s}from"./chunks/framework.CmzJUe0_.js";const u=JSON.parse('{"title":"Get请求的参数包含中括号[]时，报错400","description":"","frontmatter":{"title":"Get请求的参数包含中括号[]时，报错400","date":"2022-06-13T00:00:00.000Z","sidebar":"auto","categories":["随笔"]},"headers":[],"relativePath":"blogs/随笔/get请求参数包含中括号[]时报错.md","filePath":"blogs/随笔/get请求参数包含中括号[]时报错.md"}'),l={name:"blogs/随笔/get请求参数包含中括号[]时报错.md"};function r(p,t,n,c,i,_){return o(),a("div",null,t[0]||(t[0]=[s('<h2 id="get请求的参数包含中括号-时-报错400" tabindex="-1">get请求的参数包含中括号[]时，报错400 <a class="header-anchor" href="#get请求的参数包含中括号-时-报错400" aria-label="Permalink to &quot;get请求的参数包含中括号[]时，报错400&quot;">​</a></h2><blockquote><p>问题描述</p></blockquote><p>当上传下载文件 abc[123].xlsx 时，报错400。但是只有此文件上传下载时会报错，其他文件是正常的。经排查最终发现是由于文件名包含中括号[]导致请求的错误。</p><blockquote><p>问题分析</p></blockquote><p>经百度，发现是由于tomcat版本过高导致的。tomcat9(9.022)有一个新特性如下：</p><p>严格按照 RFC 3986规范进行访问解析，而 RFC 3986规范定义了Url中只允许包含英文字母（a-zA-Z）、数字（0-9）、-_.~4个特殊字符以及所有保留字符</p><p>因为get请求的参数是拼接在url后面的，所以参数中只要包含 [ 或 ] 都会报错400。</p><blockquote><p>总结</p></blockquote><p>tomcat高版本中，不允许url中有特殊字符。当请求的url地址中会包括特殊字符[ 和 ] ，被tomcat直接拦下，报错400。</p><p>解决方法：</p><ol><li><p>用低版本的tomcat，tomcat 7.0.76之前的版本不会出现这个问题</p></li><li><p>修改高版本tomcat的配置。修改tomcat目录底下的/conf/server.xml</p></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>打开tomcat目录底下/conf/server.xml</span></span>\n<span class="line"><span>往Connector中添加relaxedQueryChars和relaxedPathChars,直接复制下面的relaxedQueryChars和relaxedPathChars即可。</span></span>\n<span class="line"><span>&lt;Connector port=&quot;xxx&quot; relaxedQueryChars=&quot;[]|{}-^\\`&lt;&gt;&quot; relaxedPathChars=&quot;[]|{}-^\\`&lt;&gt;&quot;/&gt;</span></span></code></pre></div><ol start="3"><li>把拼在url后面的参数，用encodeURI()转换</li></ol>',13)]))}const g=e(l,[["render",r]]);export{u as __pageData,g as default};
